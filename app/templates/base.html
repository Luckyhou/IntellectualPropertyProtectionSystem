{% block doc -%}
<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html {% block html_attribs %}{% endblock html_attribs %}>
{%- block html %}
<head>
{%- block head %}
    <title>{% block title %}{{title|default}}{% endblock title %}  {% block title_subfix %}- 知识产权保护平台 {% endblock %}</title>

{%- block metas %}
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
{%- endblock metas %}

{%- block styles %}
    <!-- Bootstrap -->
    <link href="{{bootstrap_find_resource('css/bootstrap.css', cdn='bootstrap')}}" rel="stylesheet">
  <!-- Bootstrap 3.3.6 -->
{#  <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">#}
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="{{ url_for('static', filename='adminlte/css/AdminLTE.min.css') }}">
  <!-- AdminLTE Skins. We have chosen the skin-blue for this starter
        page. However, you can choose any other skin. Make sure you
        apply the skin class to the body tag so the changes take effect.
  -->
  <link rel="stylesheet" href="{{ url_for('static', filename='adminlte/css/skins/skin-blue.min.css') }}">
{%- endblock styles %}

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
{%- endblock head %}
</head>
{#<!--#}
<body class="{% block body_attribs %}hold-transition skin-blue layout-top-nav{% endblock  %}" >
{% block body -%}
<div class="wrapper">

  <!-- Main Header -->
  <header class="main-header">

    {% block main_header %}
    <!-- Header Navbar -->
    <nav class="navbar navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <a href="{{ url_for('main.index') }}" class="navbar-brand">知识产权保护平台</a>
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
            <i class="fa fa-bars"></i>
          </button>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
          <ul class="nav navbar-nav">
            <li>
                <a href="{{ url_for('main.index') }}">主页</a>
            </li>
            <li><a href="{{ url_for('showcase.index') }}">作品展示</a></li>
          {% if current_user.is_authenticated %}
              <li class="dropdown" id="navbar-my">
                  <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">个人中心<span class="caret"></span></a>
                  <ul class="dropdown-menu" role="menu">
                      <li><a href="{{ url_for('user.wallet') }}">我的钱包</a></li>
                      <li><a href="{{ url_for('user.files') }}">我的知识产权</a></li>
                      <li><a href="{{ url_for('user.authorizations') }}">我的授权</a></li>
                      <li><a href="{{ url_for('user.transactions') }}">我的交易</a></li>
                  </ul>
              </li>
          {% endif %}

          {% if current_user.is_admin() %}
            <li class="dropdown" id="navbar-admin">
              <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">后台管理<span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="{{ url_for('admin.users') }}">用户管理</a></li>
                <li><a href="{{ url_for('admin.files') }}">知识产权管理</a></li>
                <li><a href="{{ url_for('admin.authorizations') }}">授权管理</a></li>
                <li><a href="{{ url_for('admin.transactions') }}">交易管理</a></li>
              </ul>
            </li>
          {% endif %}
          </ul>
{#          <form class="navbar-form navbar-left" role="search">#}
{#            <div class="form-group">#}
{#              <input type="text" class="form-control" id="navbar-search-input" placeholder="Search">#}
{#            </div>#}
{#          </form>#}
        </div>
        <!-- /.navbar-collapse -->
        <!-- Navbar Right Menu -->
        <div class="navbar-custom-menu">
          <ul class="nav navbar-nav">
            {% if current_user.is_authenticated %}
{#            <!-- Messages: style can be found in dropdown.less-->#}
{#            <li class="dropdown messages-menu">#}
{#              <!-- Menu toggle button -->#}
{#              <a href="#" class="dropdown-toggle" data-toggle="dropdown">#}
{#                <i class="fa fa-envelope-o"></i>#}
{#                <span class="label label-success">4</span>#}
{#              </a>#}
{#              <ul class="dropdown-menu">#}
{#                <li class="header">You have 4 messages</li>#}
{#                <li>#}
{#                  <!-- inner menu: contains the messages -->#}
{#                  <ul class="menu">#}
{#                    <li><!-- start message -->#}
{#                      <a href="#">#}
{#                        <div class="pull-left">#}
{#                          <!-- User Image -->#}
{#                          <img src="{{ url_for('static', filename='adminlte/img/user2-160x160.jpg') }}" class="img-circle" alt="User Image">#}
{#                        </div>#}
{#                        <!-- Message title and timestamp -->#}
{#                        <h4>#}
{#                          Support Team#}
{#                          <small><i class="fa fa-clock-o"></i> 5 mins</small>#}
{#                        </h4>#}
{#                        <!-- The message -->#}
{#                        <p>Why not buy a new awesome theme?</p>#}
{#                      </a>#}
{#                    </li>#}
{#                    <!-- end message -->#}
{#                  </ul>#}
{#                  <!-- /.menu -->#}
{#                </li>#}
{#                <li class="footer"><a href="#">See All Messages</a></li>#}
{#              </ul>#}
{#            </li>#}
{#            <!-- /.messages-menu -->#}
{##}
{#            <!-- Notifications Menu -->#}
{#            <li class="dropdown notifications-menu">#}
{#              <!-- Menu toggle button -->#}
{#              <a href="#" class="dropdown-toggle" data-toggle="dropdown">#}
{#                <i class="fa fa-bell-o"></i>#}
{#                <span class="label label-warning">10</span>#}
{#              </a>#}
{#              <ul class="dropdown-menu">#}
{#                <li class="header">You have 10 notifications</li>#}
{#                <li>#}
{#                  <!-- Inner Menu: contains the notifications -->#}
{#                  <ul class="menu">#}
{#                    <li><!-- start notification -->#}
{#                      <a href="#">#}
{#                        <i class="fa fa-users text-aqua"></i> 5 new members joined today#}
{#                      </a>#}
{#                    </li>#}
{#                    <!-- end notification -->#}
{#                  </ul>#}
{#                </li>#}
{#                <li class="footer"><a href="#">View all</a></li>#}
{#              </ul>#}
{#            </li>#}
{#            <!-- Tasks Menu -->#}
{#            <li class="dropdown tasks-menu">#}
{#              <!-- Menu Toggle Button -->#}
{#              <a href="#" class="dropdown-toggle" data-toggle="dropdown">#}
{#                <i class="fa fa-flag-o"></i>#}
{#                <span class="label label-danger">9</span>#}
{#              </a>#}
{#              <ul class="dropdown-menu">#}
{#                <li class="header">You have 9 tasks</li>#}
{#                <li>#}
{#                  <!-- Inner menu: contains the tasks -->#}
{#                  <ul class="menu">#}
{#                    <li><!-- Task item -->#}
{#                      <a href="#">#}
{#                        <!-- Task title and progress text -->#}
{#                        <h3>#}
{#                          Design some buttons#}
{#                          <small class="pull-right">20%</small>#}
{#                        </h3>#}
{#                        <!-- The progress bar -->#}
{#                        <div class="progress xs">#}
{#                          <!-- Change the css width attribute to simulate progress -->#}
{#                          <div class="progress-bar progress-bar-aqua" style="width: 20%" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">#}
{#                            <span class="sr-only">20% Complete</span>#}
{#                          </div>#}
{#                        </div>#}
{#                      </a>#}
{#                    </li>#}
{#                    <!-- end task item -->#}
{#                  </ul>#}
{#                </li>#}
{#                <li class="footer">#}
{#                  <a href="#">View all tasks</a>#}
{#                </li>#}
{#              </ul>#}
{#            </li>#}

            <!-- User Account Menu -->
            <li class="dropdown user user-menu">
              <!-- Menu Toggle Button -->
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                <!-- The user image in the navbar-->
                <img src="{{ url_for('static', filename='adminlte/img/user2-160x160.jpg') }}" class="user-image" alt="User Image">
                <!-- hidden-xs hides the username on small devices so only the image appears. -->
                <span class="hidden-xs">{{ current_user.username }}</span>
              </a>
              <ul class="dropdown-menu">
                <!-- The user image in the menu -->
                <li class="user-header">
                  <img src="{{ url_for('static', filename='adminlte/img/user2-160x160.jpg') }}" class="img-circle" alt="User Image">

                  <p>
                    Alexander Pierce - Web Developer
                    <small>Member since Nov. 2012</small>
                  </p>
                </li>
                <!-- Menu Body -->
                <li class="user-body">
                  <div class="row">
                    <div class="col-xs-4 text-center">
                      <a href="{{ url_for('user.files') }}">我的作品</a>
                    </div>
                    <div class="col-xs-4 text-center">
                      <a href="{{ url_for('user.transactions') }}">我的交易</a>
                    </div>
                    <div class="col-xs-4 text-center">
                      <a href="{{ url_for('user.authorizations') }}">我的授权</a>
                    </div>
                  </div>
                  <!-- /.row -->
                </li>
                <!-- Menu Footer-->
                <li class="user-footer">
                  <div class="pull-left">
                    <a href="{{ url_for('user.wallet') }}" class="btn btn-default btn-flat">我的钱包</a>
                  </div>
                  <div class="pull-right">
                    <a href="{{ url_for('auth.logout') }}" class="btn btn-default btn-flat">登出</a>
                  </div>
                </li>
              </ul>
            </li>
              {% else %}
                  <li>
                    <a href="{{ url_for('auth.login') }}">登录</a>
                  </li>
                    <li>
                    <a href="{{ url_for('auth.register') }}">注册</a>
                    </li>
              {% endif %}

          </ul>
        </div>
        <!-- /.navbar-custom-menu -->
      </div>
      <!-- /.container-fluid -->
    </nav>
    {% endblock %}
  </header>

  <!-- Full Width Column -->
  <div class="content-wrapper">
    <div class="container">
      <!-- Content Header (Page header) -->
      <section class="content-header">
          {% block content_header %}
        <h1>
            {% block content_header_title %}
          block content_header_title
            {% endblock %}
          <small>{% block content_header_description %}{% endblock %}</small>
        </h1>
        <ol class="breadcrumb">
            {% block levels %}
          <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
          <li><a href="#">Layout</a></li>
          <li class="active">Top Navigation</li>
            {% endblock %}
        </ol>
          {% endblock %}
      </section>

      <!-- Main content -->
      <section class="content">
          {% block content %}
        <div class="callout callout-info">
          <h4>Tip!</h4>

          <p>Add the layout-top-nav class to the body tag to get this layout. This feature can also be used with a
            sidebar! So use this class if you want to remove the custom dropdown menus from the navbar and use regular
            links instead.</p>
        </div>
        <div class="callout callout-danger">
          <h4>Warning!</h4>

          <p>The construction of this layout differs from the normal one. In other words, the HTML markup of the navbar
            and the content will slightly differ than that of the normal layout.</p>
        </div>
        <div class="box box-default">
          <div class="box-header with-border">
            <h3 class="box-title">Blank Box</h3>
          </div>
          <div class="box-body">
            The great content goes here
          </div>
          <!-- /.box-body -->
        </div>
        <!-- /.box -->
          {% endblock %}
      </section>
      <!-- /.content -->
    </div>
    <!-- /.container -->
  </div>
  <!-- /.content-wrapper -->
  <footer class="main-footer">
    <div class="container">
        {% block footer %}
      <div class="pull-right hidden-xs">
        <b>Version</b> {{ version or "1.0" }}
      </div>
      <strong>Copyright &copy; 2017 <a href="{{ url_for('main.index') }}">知识产权保护系统</a>.</strong> All rights
      reserved.
        {% endblock %}
    </div>
    <!-- /.container -->
  </footer>
</div>
<!-- ./wrapper -->


<!-- REQUIRED JS SCRIPTS -->

{#<!-- jQuery 2.2.3 -->#}
{#<script src="plugins/jQuery/jquery-2.2.3.min.js"></script>#}
{#<!-- Bootstrap 3.3.6 -->#}
{#<script src="bootstrap/js/bootstrap.min.js"></script>#}
{% block scripts %}
    <script src="{{bootstrap_find_resource('jquery.js', cdn='jquery')}}"></script>
    <script src="{{bootstrap_find_resource('js/bootstrap.js', cdn='bootstrap')}}"></script>

    {{ moment.include_moment() }}

    {{ JSGlue.include() }}

    <!-- AdminLTE App -->
    <script src="{{ url_for('static', filename='adminlte/js/app.min.js') }}"></script>

    <script type="application/javascript" >
        $(document).ready(function () {
            {% block script_doc_ready %}
            function active_nav(nav_active) {
                if (typeof nav_active === 'number') {
                    $("#navbar-collapse").find("> ul > li").each(function (i) {
                        if (i === nav_active) {
                            $(this).addClass('active');
                            $(this).children('a').html(function(i, oldHtml) {
                                return oldHtml + '<span class="sr-only">(current)</span>'
                            })
                        } else {
                            $(this).removeClass('active')
                        }
                    });
                }
            }
            {% endblock %}
        })
    </script>
{%- endblock scripts %}
{%- endblock body %}
</body>
{%- endblock html %}
</html>
{% endblock doc -%}
